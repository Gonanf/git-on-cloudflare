@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme {
  --font-mono: ui-monospace, SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility btn {
  /* Button components */
  @apply inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md font-medium text-white bg-blue-600 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;

  &:hover {
    @apply bg-blue-700;
  }

  &.secondary {
    @apply text-gray-700 bg-white border-gray-300 dark:text-gray-200 dark:bg-gray-800 dark:border-gray-600;
  }

  &.secondary:hover {
    @apply bg-gray-50 dark:bg-gray-700;
  }

  &.sm {
    @apply px-3 py-1.5 text-sm;
  }
}

@utility secondary {
  &.btn {
    @apply text-gray-700 bg-white border-gray-300 dark:text-gray-200 dark:bg-gray-800 dark:border-gray-600;
  }

  &.btn:hover {
    @apply bg-gray-50 dark:bg-gray-700;
  }
}

@utility sm {
  &.btn {
    @apply px-3 py-1.5 text-sm;
  }
}

@utility alert {
  /* Alert components */
  @apply p-4 rounded-md mb-4;

  &.warn {
    @apply bg-yellow-50 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200;
  }

  &.error {
    @apply bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-200;
  }
}

@utility warn {
  &.alert {
    @apply bg-yellow-50 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200;
  }
}

@utility error {
  &.alert {
    @apply bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-200;
  }
}

@utility muted {
  /* Utility classes matching existing styles */
  @apply text-gray-500 dark:text-gray-400;
}

@utility list {
  & > div {
    @apply py-2 border-b border-gray-100 dark:border-gray-800 last:border-b-0;
  }
}

@utility repo-grid {
  @apply grid gap-8 md:grid-cols-2 mt-6;
}

@utility pager {
  @apply flex justify-between items-center my-6 p-4 bg-gray-50 dark:bg-gray-800/30 rounded-lg;

  & .perpage {
    @apply flex gap-3 text-sm;
  }

  & .perpage a {
    @apply px-2 py-1 rounded-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors;
  }

  & .nav {
    @apply flex gap-3;
  }
}

@utility perpage {
  .pager & {
    @apply flex gap-3 text-sm;
  }

  .pager & a {
    @apply px-2 py-1 rounded-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors;
  }
}

@utility nav {
  .pager & {
    @apply flex gap-3;
  }
}

@utility breadcrumb {
  @apply flex items-center gap-2 text-sm mb-4 p-3 bg-gray-50 dark:bg-gray-800/30 rounded-lg;
}

@utility container {
  @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2;
}

@utility card {
  @apply rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/30;
}

@utility page-header {
  @apply flex justify-between items-center mb-6 pb-4;
}

@utility no-scrollbar {
  /* Hide scrollbar but keep functionality */
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@layer utilities {
  /* Isolate markdown content from Tailwind's prose styles */
  .markdown-content * {
    all: revert;
  }
  /* Fine-tune code block spacing inside markdown-content */
  .markdown-content pre {
    /* Reduce default UA margins and padding */
    margin-top: 0.25rem; /* 4px */
    margin-bottom: 0.25rem; /* 4px */
    padding: 0.75rem; /* 12px */
    border-radius: 0.375rem; /* rounded-md */
    background-color: transparent;
  }
  .markdown-content pre code {
    font-family: var(--font-mono);
    font-size: 0.875rem; /* text-sm */
  }
}

@layer base {
  /* Custom base styles */
  :root {
    --color-primary: var(--color-blue-600);
    --color-secondary: var(--color-gray-600);
  }

  html.dark {
    color-scheme: dark;
  }

  /* Light mode (default) */
  html:not(.dark) body {
    /* Tailwind gray-200 to reduce glare */
    background-color: #e5e7eb;
    color: #111827; /* gray-900 */
  }
  html:not(.dark) .blob-container {
    /* Slightly lighter than body for contrast (approx gray-100) */
    background-color: #f3f4f6;
    border-color: #d1d5db; /* gray-300 */
  }

  h1 {
    @apply text-3xl font-bold mb-6;
  }

  h2 {
    @apply text-2xl font-semibold mb-4 mt-6;
  }

  h3 {
    @apply text-lg font-semibold mb-3 mt-4;
  }

  p {
    @apply mb-4;
  }

  a {
    @apply text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300;
    transition: color 150ms ease;
  }
}

@layer components {
  /* Table styles */
  table {
    @apply w-full border-collapse bg-white dark:bg-gray-800/30;
  }

  table th {
    @apply px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50;
  }

  table td {
    @apply px-4 py-3 text-sm;
  }

  table tbody tr {
    @apply border-t border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-colors;
  }

  table tbody tr:first-child {
    @apply border-t-0;
  }

  /* Code blocks */
  pre {
    @apply p-4 bg-gray-50 dark:bg-gray-900 rounded-md overflow-x-auto;
  }

  pre code {
    @apply text-sm font-mono;
  }

  code {
    @apply px-1 py-0.5 bg-gray-100 dark:bg-gray-800 rounded-sm text-sm font-mono;
  }
}
